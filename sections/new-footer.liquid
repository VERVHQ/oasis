{% schema %}
 {
   "name": "New Footer",
   "settings": [
     {
       "type": "header",
       "content": "Section Styling"
     },
     {
       "type": "color",
       "id": "bg_color",
       "label": "Background Color",
       "default": "#0a0a0a"
     },
      {
       "type": "image_picker",
       "id": "bg_image",
       "label": "Background Image (Optional)"
     },
     {
       "type": "range",
       "id": "bg_image_opacity",
       "min": 0,
       "max": 100,
       "step": 5,
       "unit": "%",
       "label": "Image Opacity",
       "default": 100
     },
      {
       "type": "range",
       "id": "overlay_opacity",
       "min": 0,
       "max": 100,
       "step": 5,
       "unit": "%",
       "label": "Black Overlay Opacity",
       "default": 0
     },
     {
       "type": "color",
       "id": "divider_color",
       "label": "Divider Color",
       "default": "#333333"
     },
     {
       "type": "range",
       "id": "padding_top",
       "min": 0,
       "max": 200,
       "step": 4,
       "unit": "px",
       "label": "Top Padding",
       "default": 60
     },
     {
       "type": "range",
       "id": "padding_bottom",
       "min": 0,
       "max": 200,
       "step": 4,
       "unit": "px",
       "label": "Bottom Padding",
       "default": 40
     },
     {
       "type": "header",
       "content": "Typography"
     },
     {
       "type": "color",
       "id": "text_color",
       "label": "Text Color",
       "default": "#ffffff"
     },
     {
       "type": "range",
       "id": "heading_font_size",
       "min": 12,
       "max": 40,
       "step": 1,
       "unit": "px",
       "label": "Column Heading Size",
       "default": 18
     },
     {
       "type": "range",
       "id": "link_font_size",
       "min": 12,
       "max": 30,
       "step": 1,
       "unit": "px",
       "label": "Link Text Size",
       "default": 14
     },
     {
       "type": "range",
       "id": "copyright_font_size",
       "min": 10,
       "max": 24,
       "step": 1,
       "unit": "px",
       "label": "Copyright Text Size",
       "default": 12
     },
     {
       "type": "header",
       "content": "Top Content (Logo)"
     },
     {
       "type": "image_picker",
       "id": "logo_image",
       "label": "Brand Logo"
     },
     {
       "type": "range",
       "id": "logo_width",
       "min": 50,
       "max": 400,
       "step": 10,
       "unit": "px",
       "label": "Logo Width",
       "default": 150
     },
     {
       "type": "header",
       "content": "Right Side Badge/Image"
     },
     {
        "type": "image_picker",
        "id": "badge_image",
        "label": "Badge/Certification Image"
     },
     {
        "type": "range",
        "id": "badge_width",
        "min": 20,
        "max": 200,
        "step": 5,
        "unit": "px",
        "label": "Badge Width",
        "default": 80
     },
     {
       "type": "header",
       "content": "Bottom Content"
     },
     {
       "type": "richtext",
       "id": "copyright_text",
       "label": "Copyright Text",
       "default": "<p>2026 Â© Oasis Inc. All Rights Reserved</p>"
     },
     {
       "type": "color",
       "id": "copyright_color",
       "label": "Copyright Color",
       "default": "#888888"
     },
     {
       "type": "header",
       "content": "Social Media Links"
     },
     {
       "type": "url",
       "id": "social_twitter_link",
       "label": "Twitter/X Link"
     },
     {
       "type": "url",
       "id": "social_facebook_link",
       "label": "Facebook Link"
     },
     {
       "type": "url",
       "id": "social_instagram_link",
       "label": "Instagram Link"
     },
     {
       "type": "url",
       "id": "social_linkedin_link",
       "label": "LinkedIn Link"
     },
      {
       "type": "url",
       "id": "social_youtube_link",
       "label": "YouTube Link"
     }
   ],
   "blocks": [
     {
       "type": "footer_column",
       "name": "Navigation Column",
       "limit": 3,
       "settings": [
         {
           "type": "text",
           "id": "heading",
           "label": "Heading",
           "default": "Column Heading"
         },
         {
           "type": "link_list",
           "id": "menu",
           "label": "Menu"
         }
       ]
     }
   ],
   "presets": [
     {
       "name": "New Footer (REORC)",
       "blocks": [
         {
           "type": "footer_column",
           "settings": { "heading": "Solutions" }
         },
         {
           "type": "footer_column",
           "settings": { "heading": "Company" }
         },
         {
           "type": "footer_column",
           "settings": { "heading": "Resources" }
         }
       ]
     }
   ]
 }
{% endschema %}

{%- style -%}
  /* Fix for sticky hero showing through: Ensure footer sits on top */
  #shopify-section-{{ section.id }} {
    position: relative;
    z-index: 5;
    background-color: {{ section.settings.bg_color }};
  }

 .new-footer-section-{{ section.id }} {
   position: relative;
   background-color: {{ section.settings.bg_color }};
   color: {{ section.settings.text_color }};
   overflow: hidden;
   font-family: 'Quicksand', sans-serif;
 }

 .new-footer-bg {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   z-index: 0;
   pointer-events: none;
 }

 .new-footer-bg img {
   width: 100%;
   height: 100%;
   object-fit: cover;
   opacity: {{ section.settings.bg_image_opacity | divided_by: 100.0 }};
 }
 
 .new-footer-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: #000;
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    pointer-events: none;
    z-index: 1;
 }

 .new-footer-container {
   position: relative;
   z-index: 2;
   max-width: 1400px;
   margin: 0 auto;
   padding: 0 20px;
   padding-top: {{ section.settings.padding_top }}px;
   padding-bottom: {{ section.settings.padding_bottom }}px;
 }

 /* --- ROW 1: Logo --- */
 .footer-top-logo {
   padding-bottom: 30px;
   border-bottom: 1px solid {{ section.settings.divider_color }};
   margin-bottom: 40px;
 }

 .footer-top-logo img, .footer-top-logo svg {
   width: {{ section.settings.logo_width }}px;
   height: auto;
   display: block;
 }

 /* --- ROW 2: Main Grid --- */
 .footer-main-grid {
   display: grid;
   grid-template-columns: 1fr;
   gap: 40px;
   padding-bottom: 40px;
   border-bottom: 1px solid {{ section.settings.divider_color }};
   margin-bottom: 30px;
 }

 @media screen and (min-width: 768px) {
   .footer-main-grid {
     grid-template-columns: repeat(2, 1fr);
   }
 }
 
 @media screen and (min-width: 1024px) {
    .footer-main-grid {
        grid-template-columns: repeat(4, 1fr); /* 3 cols for Nav + 1 for Badge */
    }
 }

 .footer-column-heading {
   font-size: {{ section.settings.heading_font_size }}px;
   font-weight: 600;
   margin-bottom: 24px;
   color: {{ section.settings.text_color }};
 }

 .footer-menu {
   list-style: none;
   padding: 0;
   margin: 0;
 }

 .footer-menu li {
   margin-bottom: 14px;
 }

 .footer-menu a {
   text-decoration: none;
   color: {{ section.settings.text_color }};
   font-size: {{ section.settings.link_font_size }}px;
   opacity: 0.7;
   transition: opacity 0.2s;
 }

 .footer-menu a:hover {
   opacity: 1;
 }
 
 .footer-badge-column {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
 }
 
 @media screen and (min-width: 1024px) {
    .footer-badge-column {
        align-items: flex-end; /* Right align on desktop */
    }
 }

 .footer-badge img {
    width: {{ section.settings.badge_width }}px;
    height: auto;
 }


 /* --- ROW 3: Bottom --- */
 .footer-bottom-bar {
   display: flex;
   flex-direction: column;
   gap: 20px;
   align-items: flex-start;
 }

 @media screen and (min-width: 768px) {
   .footer-bottom-bar {
     flex-direction: row;
     justify-content: space-between;
     align-items: center;
   }
 }

 .footer-copyright {
   color: {{ section.settings.copyright_color }};
   font-size: {{ section.settings.copyright_font_size }}px;
 }
 
 .footer-copyright p { margin: 0; }

 .footer-social-icons {
   display: flex;
   gap: 20px;
 }

 .footer-social-link {
   color: {{ section.settings.text_color }};
   opacity: 0.8;
   transition: opacity 0.2s;
 }
 
 .footer-social-link:hover {
    opacity: 1;
 }

 .footer-social-link svg {
   width: 20px;
   height: 20px;
 }

{%- endstyle -%}

<div class="new-footer-section-{{ section.id }}">
 
 <div class="new-footer-bg">
    {%- if section.settings.bg_image != blank -%}
      {{ section.settings.bg_image | image_url: width: 2000 | image_tag: loading: 'lazy' }}
    {%- endif -%}
 </div>
 
 <div class="new-footer-overlay"></div>

 <div class="new-footer-container">
   
   <!-- Top Row: Logo -->
   <div class="footer-top-logo">
     {%- if section.settings.logo_image != blank -%}
       {{ section.settings.logo_image | image_url: width: section.settings.logo_width | image_tag: loading: 'lazy' }}
     {%- else -%}
       <!-- Placeholder Text Logo if no image -->
       <h2 style="margin:0; font-size: 24px;">{{ shop.name }}</h2>
     {%- endif -%}
   </div>

   <!-- Middle Row: Grid -->
   <div class="footer-main-grid">
     <!-- Navigation Columns (Limit 3) -->
     {%- for block in section.blocks -%}
       <div class="footer-nav-col">
         {%- if block.settings.heading != blank -%}
           <div class="footer-column-heading">{{ block.settings.heading }}</div>
         {%- endif -%}
         
         {%- if block.settings.menu != blank -%}
           <ul class="footer-menu">
             {%- for link in linklists[block.settings.menu].links -%}
               <li><a href="{{ link.url }}">{{ link.title }}</a></li>
             {%- endfor -%}
           </ul>
         {%- endif -%}
       </div>
     {%- endfor -%}
     
     <!-- Spacer columns if less than 3 blocks? No, grid auto-placement handles it, 
          but we want the badge to be the 4th column always? 
          We'll just put the Badge column after the loop. 
          If user adds 3 blocks, badge is 4th. If user adds 4 blocks, badge is 5th (next row).
          User is limited to 3 blocks in schema.
      -->

     <!-- Badge Column (Right aligned on desktop) -->
      <div class="footer-badge-column">
        {%- if section.settings.badge_image != blank -%}
            <div class="footer-badge">
                {{ section.settings.badge_image | image_url: width: section.settings.badge_width | image_tag: loading: 'lazy' }}
            </div>
        {%- endif -%}
      </div>
   </div>

   <!-- Bottom Row: Copyright & Socials -->
   <div class="footer-bottom-bar">
     <div class="footer-copyright">
       {{ section.settings.copyright_text }}
     </div>
     
     <div class="footer-social-icons">
        {%- if section.settings.social_youtube_link != blank -%}
         <a href="{{ section.settings.social_youtube_link }}" class="footer-social-link" aria-label="YouTube">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"/><path d="m10 15 5-3-5-3z"/></svg>
         </a>
       {%- endif -%}
       {%- if section.settings.social_twitter_link != blank -%}
         <a href="{{ section.settings.social_twitter_link }}" class="footer-social-link" aria-label="X/Twitter">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4l11.733 16h4.267l-11.733 -16z"/><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"/></svg>
         </a>
       {%- endif -%}
       {%- if section.settings.social_linkedin_link != blank -%}
         <a href="{{ section.settings.social_linkedin_link }}" class="footer-social-link" aria-label="LinkedIn">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
         </a>
       {%- endif -%}
       {%- if section.settings.social_facebook_link != blank -%}
         <a href="{{ section.settings.social_facebook_link }}" class="footer-social-link" aria-label="Facebook">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
         </a>
       {%- endif -%}
       {%- if section.settings.social_instagram_link != blank -%}
         <a href="{{ section.settings.social_instagram_link }}" class="footer-social-link" aria-label="Instagram">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
         </a>
       {%- endif -%}
     </div>
   </div>

 </div>
</div>
