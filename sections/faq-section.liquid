{% schema %}
 {
   "name": "FAQ Section",
   "settings": [
     {
       "type": "text",
       "id": "heading",
       "label": "Heading",
       "default": "Frequently Asked Questions"
     },
     {
       "type": "color",
       "id": "bg_color",
       "label": "Section Background Color",
       "default": "#ffffff"
     },
     {
       "type": "color",
       "id": "card_bg_color",
       "label": "Question Background Color",
       "default": "#f9f9f9"
     },
     {
       "type": "color",
       "id": "text_color",
       "label": "Text Color",
       "default": "#1a1a1a"
     },
     {
       "type": "range",
       "id": "border_radius",
       "min": 0,
       "max": 40,
       "step": 2,
       "unit": "px",
       "label": "Corner Radius",
       "default": 12
     },
     {
       "type": "range",
       "id": "padding_top",
       "min": 0,
       "max": 100,
       "step": 4,
       "unit": "px",
       "label": "Padding Top",
       "default": 60
     },
     {
       "type": "range",
       "id": "padding_bottom",
       "min": 0,
       "max": 100,
       "step": 4,
       "unit": "px",
       "label": "Padding Bottom",
       "default": 60
     }
   ],
   "blocks": [
     {
       "type": "question",
       "name": "Question",
       "settings": [
         {
           "type": "text",
           "id": "title",
           "label": "Question",
           "default": "What is your return policy?"
         },
         {
           "type": "richtext",
           "id": "answer",
           "label": "Answer",
           "default": "<p>We offer a 30-day return policy for all unused items in their original packaging.</p>"
         }
       ]
     }
   ],
   "presets": [
     {
       "name": "FAQ Section",
       "blocks": [
         { "type": "question" },
         { "type": "question" },
         { "type": "question" },
         { "type": "question" }
       ]
     }
   ]
 }
{% endschema %}

{%- style -%}
 .section-{{ section.id }}-padding {
   padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
   padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
   background-color: {{ section.settings.bg_color }};
 }

 @media screen and (min-width: 750px) {
   .section-{{ section.id }}-padding {
     padding-top: {{ section.settings.padding_top }}px;
     padding-bottom: {{ section.settings.padding_bottom }}px;
   }
 }

 .faq-container-{{ section.id }} {
   max-width: 1200px;
   margin: 0 auto;
   padding: 0 20px;
 }

 .faq-header {
   text-align: center;
   margin-bottom: 48px;
 }

 .faq-title {
   font-size: 2.5rem;
   font-weight: 700;
   color: {{ section.settings.text_color }};
   margin: 0;
   line-height: 1.2;
   font-family: 'Quicksand', sans-serif; /* Consistent font */
 }

 .faq-grid {
   display: grid;
   grid-template-columns: 1fr;
   gap: 24px;
 }

 @media screen and (min-width: 750px) {
   .faq-grid {
     grid-template-columns: repeat(2, 1fr);
     column-gap: 40px;
     row-gap: 24px;
   }
 }

 /* Accordion Item */
 .faq-item {
   background-color: {{ section.settings.card_bg_color }};
   border-radius: 0 0 {{ section.settings.border_radius }}px {{ section.settings.border_radius }}px;
   overflow: hidden;
   /* No border, just background as per typical clean design */
 }

 .faq-details {
   display: block;
   width: 100%;
 }

 .faq-summary {
   list-style: none; /* Hide default triangle */
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 24px;
   cursor: pointer;
   color: {{ section.settings.text_color }};
   font-weight: 600;
   font-size: 1.25rem;
   font-family: 'Quicksand', sans-serif;
 }
 
 .faq-summary::-webkit-details-marker {
   display: none;
 }

 .faq-icon {
   width: 24px;
   height: 24px;
   transition: transform 0.3s ease;
   flex-shrink: 0;
   background-color: #1a1a1a; /* Icon circle background */
   border-radius: 50%;
   display: flex;
   align-items: center;
   justify-content: center;
   margin-right: 16px; /* Icon on the left as per reference */
 }
 
 .faq-icon svg {
    width: 12px;
    height: 12px;
    color: white;
 }

 .faq-details[open] .faq-icon {
   transform: rotate(180deg);
 }
 
 .faq-question-text {
    flex: 1;
 }

 .faq-answer {
   padding: 0 24px 24px 64px; /* Indented to align with text */
   color: {{ section.settings.text_color }};
   opacity: 0.8;
   line-height: 1.6;
 }
 
 /* Reverse icon order to match reference (Icon Left, Text Right) */
 .faq-summary {
    flex-direction: row-reverse;
    justify-content: flex-end;
 }
 
 .faq-question-text {
    margin-left: 16px;
    flex: 1;
 }
 
 .faq-icon {
    margin-right: 0; 
 }

{%- endstyle -%}

<div class="section-{{ section.id }}-padding">
 <div class="faq-container-{{ section.id }}">
   
   {%- if section.settings.heading != blank -%}
     <div class="faq-header">
       <h2 class="faq-title">{{ section.settings.heading }}</h2>
     </div>
   {%- endif -%}

   <div class="faq-grid">
     {%- for block in section.blocks -%}
       <div class="faq-item" {{ block.shopify_attributes }}>
         <details class="faq-details">
           <summary class="faq-summary">
             <span class="faq-question-text">{{ block.settings.title }}</span>
             <div class="faq-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
             </div>
           </summary>
           <div class="faq-answer">
             {{ block.settings.answer }}
           </div>
         </details>
       </div>
     {%- endfor -%}
   </div>

 </div>
</div>
